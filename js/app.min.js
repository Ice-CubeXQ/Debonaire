(()=>{"use strict";const e={};let t=!0,r=(e=500)=>{if(t){const r=document.querySelectorAll("[data-lp]");setTimeout((()=>{r.forEach((e=>{e.style.paddingRight=""})),document.body.style.paddingRight="",document.documentElement.classList.remove("lock")}),e),t=!1,setTimeout((function(){t=!0}),e)}},i=(e=500)=>{if(t){const r=document.querySelectorAll("[data-lp]"),i=window.innerWidth-document.body.offsetWidth+"px";r.forEach((e=>{e.style.paddingRight=i})),document.body.style.paddingRight=i,document.documentElement.classList.add("lock"),t=!1,setTimeout((function(){t=!0}),e)}};function s(e){return e.filter((function(e,t,r){return r.indexOf(e)===t}))}e.watcher=new class{constructor(e){this.config=Object.assign({logging:!0},e),this.observer,!document.documentElement.classList.contains("watcher")&&this.scrollWatcherRun()}scrollWatcherUpdate(){this.scrollWatcherRun()}scrollWatcherRun(){document.documentElement.classList.add("watcher"),this.scrollWatcherConstructor(document.querySelectorAll("[data-watch]"))}scrollWatcherConstructor(e){if(e.length){this.scrollWatcherLogging(`Проснулся, слежу за объектами (${e.length})...`),s(Array.from(e).map((function(e){if("navigator"===e.dataset.watch&&!e.dataset.watchThreshold){let t;e.clientHeight>2?(t=window.innerHeight/2/(e.clientHeight-1),t>1&&(t=1)):t=1,e.setAttribute("data-watch-threshold",t.toFixed(2))}return`${e.dataset.watchRoot?e.dataset.watchRoot:null}|${e.dataset.watchMargin?e.dataset.watchMargin:"0px"}|${e.dataset.watchThreshold?e.dataset.watchThreshold:0}`}))).forEach((t=>{let r=t.split("|"),i={root:r[0],margin:r[1],threshold:r[2]},s=Array.from(e).filter((function(e){let t=e.dataset.watchRoot?e.dataset.watchRoot:null,r=e.dataset.watchMargin?e.dataset.watchMargin:"0px",s=e.dataset.watchThreshold?e.dataset.watchThreshold:0;if(String(t)===i.root&&String(r)===i.margin&&String(s)===i.threshold)return e})),o=this.getScrollWatcherConfig(i);this.scrollWatcherInit(s,o)}))}else this.scrollWatcherLogging("Сплю, нет объектов для слежки. ZzzZZzz")}getScrollWatcherConfig(e){let t={};if(document.querySelector(e.root)?t.root=document.querySelector(e.root):"null"!==e.root&&this.scrollWatcherLogging(`Эмм... родительского объекта ${e.root} нет на странице`),t.rootMargin=e.margin,!(e.margin.indexOf("px")<0&&e.margin.indexOf("%")<0)){if("prx"===e.threshold){e.threshold=[];for(let t=0;t<=1;t+=.005)e.threshold.push(t)}else e.threshold=e.threshold.split(",");return t.threshold=e.threshold,t}this.scrollWatcherLogging("йой, настройку data-watch-margin нужно задавать в PX или %")}scrollWatcherCreate(e){console.log(e),this.observer=new IntersectionObserver(((e,t)=>{e.forEach((e=>{this.scrollWatcherCallback(e,t)}))}),e)}scrollWatcherInit(e,t){this.scrollWatcherCreate(t),e.forEach((e=>this.observer.observe(e)))}scrollWatcherIntersecting(e,t){e.isIntersecting?(!t.classList.contains("_watcher-view")&&t.classList.add("_watcher-view"),this.scrollWatcherLogging(`Я вижу ${t.classList}, добавил класс _watcher-view`)):(t.classList.contains("_watcher-view")&&t.classList.remove("_watcher-view"),this.scrollWatcherLogging(`Я не вижу ${t.classList}, убрал класс _watcher-view`))}scrollWatcherOff(e,t){t.unobserve(e),this.scrollWatcherLogging(`Я перестал следить за ${e.classList}`)}scrollWatcherLogging(e){this.config.logging&&function(e){setTimeout((()=>{window.FLS&&console.log(e)}),0)}(`[Наблюдатель]: ${e}`)}scrollWatcherCallback(e,t){const r=e.target;this.scrollWatcherIntersecting(e,r),r.hasAttribute("data-watch-once")&&e.isIntersecting&&this.scrollWatcherOff(r,t),document.dispatchEvent(new CustomEvent("watcherCallback",{detail:{entry:e}}))}}({});class o{constructor(e){e.length&&(this.elements=Array.from(e).map((e=>new o.Each(e,this.options))))}destroyEvents(){this.elements.forEach((e=>{e.destroyEvents()}))}setEvents(){this.elements.forEach((e=>{e.setEvents()}))}}o.Each=class{constructor(e){this.parent=e,this.elements=this.parent.querySelectorAll("[data-prlx]"),this.animation=this.animationFrame.bind(this),this.offset=0,this.value=0,this.smooth=e.dataset.prlxSmooth?Number(e.dataset.prlxSmooth):15,this.setEvents()}setEvents(){this.animationID=window.requestAnimationFrame(this.animation)}destroyEvents(){window.cancelAnimationFrame(this.animationID)}animationFrame(){const e=this.parent.getBoundingClientRect().top,t=this.parent.offsetHeight,r=window.innerHeight,i=e-r,s=e+t,o=this.parent.dataset.prlxCenter?this.parent.dataset.prlxCenter:"center";if(i<30&&s>-30)switch(o){case"top":this.offset=-1*e;break;case"center":this.offset=r/2-(e+t/2);break;case"bottom":this.offset=r-(e+t)}this.value+=(this.offset-this.value)/this.smooth,this.animationID=window.requestAnimationFrame(this.animation),this.elements.forEach((e=>{const t={axis:e.dataset.axis?e.dataset.axis:"v",direction:e.dataset.direction?e.dataset.direction+"1":"-1",coefficient:e.dataset.coefficient?Number(e.dataset.coefficient):5,additionalProperties:e.dataset.properties?e.dataset.properties:""};this.parameters(e,t)}))}parameters(e,t){"v"==t.axis?e.style.transform=`translate3D(0, ${(t.direction*(this.value/t.coefficient)).toFixed(2)}px,0) ${t.additionalProperties}`:"h"==t.axis&&(e.style.transform=`translate3D(${(t.direction*(this.value/t.coefficient)).toFixed(2)}px,0,0) ${t.additionalProperties}`)}},document.querySelectorAll("[data-prlx-parent]")&&(e.parallax=new o(document.querySelectorAll("[data-prlx-parent]")));let a=!1;function n(e,t,r,i){return new(r||(r=Promise))((function(s,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function n(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,n)}l((i=i.apply(e,t||[])).next())}))}function l(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}setTimeout((()=>{if(a){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0),"function"==typeof SuppressedError&&SuppressedError;var c=l((function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var i,s,o;if(Array.isArray(t)){if((i=t.length)!=r.length)return!1;for(s=i;0!=s--;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((i=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(s=i;0!=s--;)if(!Object.prototype.hasOwnProperty.call(r,o[s]))return!1;for(s=i;0!=s--;){var a=o[s];if(!e(t[a],r[a]))return!1}return!0}return t!=t&&r!=r}));const h="__googleMapsScriptId";var d;!function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"}(d||(d={}));class u{constructor({apiKey:e,authReferrerPolicy:t,channel:r,client:i,id:s=h,language:o,libraries:a=[],mapIds:n,nonce:l,region:d,retries:g=3,url:m="https://maps.googleapis.com/maps/api/js",version:p}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=t,this.channel=r,this.client=i,this.id=s||h,this.language=o,this.libraries=a,this.mapIds=n,this.nonce=l,this.region=d,this.retries=g,this.url=m,this.version=p,u.instance){if(!c(this.options,u.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(u.instance.options)}`);return u.instance}u.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?d.FAILURE:this.done?d.SUCCESS:this.loading?d.LOADING:d.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise(((e,t)=>{this.loadCallback((r=>{r?t(r.error):e(window.google)}))}))}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,t;if(document.getElementById(this.id))return void this.callback();const r={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(r).forEach((e=>!r[e]&&delete r[e])),(null===(t=null===(e=null===window||void 0===window?void 0:window.google)||void 0===e?void 0:e.maps)||void 0===t?void 0:t.importLibrary)||(e=>{let t,r,i,s="The Google Maps JavaScript API",o="google",a="importLibrary",l="__ib__",c=document,h=window;h=h[o]||(h[o]={});const d=h.maps||(h.maps={}),u=new Set,g=new URLSearchParams,m=()=>t||(t=new Promise(((a,h)=>n(this,void 0,void 0,(function*(){var n;for(i in yield r=c.createElement("script"),r.id=this.id,g.set("libraries",[...u]+""),e)g.set(i.replace(/[A-Z]/g,(e=>"_"+e[0].toLowerCase())),e[i]);g.set("callback",o+".maps."+l),r.src=this.url+"?"+g,d[l]=a,r.onerror=()=>t=h(Error(s+" could not load.")),r.nonce=this.nonce||(null===(n=c.querySelector("script[nonce]"))||void 0===n?void 0:n.nonce)||"",c.head.append(r)})))));d[a]?console.warn(s+" only loads once. Ignoring:",e):d[a]=(e,...t)=>u.add(e)&&m().then((()=>d[a](e,...t)))})(r);const i=this.libraries.map((e=>this.importLibrary(e)));i.length||i.push(this.importLibrary("core")),Promise.all(i).then((()=>this.callback()),(e=>{const t=new ErrorEvent("error",{error:e});this.loadErrorCallback(t)}))}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const e=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${e} ms.`),setTimeout((()=>{this.deleteScript(),this.setScript()}),e)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach((e=>{e(this.onerrorEvent)})),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading=!0,this.setScript()}}}const g=991.98,m=[{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#B1AEAE"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#E5E2E2"}]},{featureType:"poi",elementType:"labels.icon",stylers:[{saturation:-100},{lightness:45}]},{featureType:"poi",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#D6D3D3"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#CECBCB"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#B0AEAE"}]},{featureType:"road",elementType:"labels.text.stroke",stylers:[{color:"#E4E1E1"}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"},{saturation:-100}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"on"},{saturation:-100},{lightness:50}]},{featureType:"water",elementType:"all",stylers:[{color:"#D0CDCD"},{visibility:"on"}]}];(()=>{const e=".js-map-section",t=".js-map-marker",r=".js-map",i=document.querySelectorAll(e);if(!i.length)return;(async e=>{const t=new u({apiKey:"YOUR_API_KEY",version:"weekly",libraries:["places"]});try{const{Map:r}=await t.importLibrary("maps"),{Marker:i}=await t.importLibrary("marker");e({Map:r,Marker:i,Core:await t.importLibrary("core")})}catch(e){console.log("google map error"),console.log(e)}})((e=>{i.forEach((i=>{const s=i.querySelectorAll(r);s.length&&s.forEach((r=>{const i=r.parentElement.querySelectorAll(t),s=Array.from(i).map((e=>({lng:parseFloat(e.dataset.lng)||0,lat:parseFloat(e.dataset.lat)||0,icon:e.dataset.icon})));(({api:e,lng:t,lat:r,markersData:i,zoom:s,maxZoom:o,$map:a})=>{const n={maxZoom:o,zoom:s,mapTypeControl:!1,styles:m,center:{lat:r,lng:t},disableDefaultUI:!0},l=new e.Map(a,n),c=window.innerWidth<g?{width:30,height:42}:{width:40,height:57},h=i.map((({lat:t,lng:r,icon:i})=>{const s=new e.marker.AdvancedMarkerElement({map:l,position:new e.Core.LatLng(t,r),icon:{url:i,anchor:new e.Core.Point(c.width/2,c.height),scaledSize:new e.Core.Size(c.width,c.height)}});return e.Core.event.addListener(s,"click",(()=>{h.forEach((t=>t.setIcon({url:t.icon.url,anchor:new e.Core.Point(c.width/2,c.height),scaledSize:new e.Core.Size(c.width,c.height)}))),s.setIcon({url:s.icon.url,anchor:new e.Core.Point(c.width/2,c.height),scaledSize:new e.Core.Size(c.width,c.height)}),l.panTo(s.getPosition())})),s}))})({api:e,$map:r,lng:parseFloat(r.dataset.lng)||0,lat:parseFloat(r.dataset.lat)||0,zoom:parseFloat(r.dataset.zoom)||6,maxZoom:parseFloat(r.dataset.maxZoom)||18,markersData:s})}))}))}))})(),window.FLS=!0,document.documentElement.classList.contains("loading")||window.addEventListener("load",(function(){setTimeout((function(){document.documentElement.classList.add("loaded")}),0)})),document.querySelector(".icon-menu")&&document.addEventListener("click",(function(e){t&&e.target.closest(".icon-menu")&&(((e=500)=>{document.documentElement.classList.contains("lock")?r(e):i(e)})(),document.documentElement.classList.toggle("menu-open"))})),function(){a=!0;const e=document.querySelector("header.header"),t=e.hasAttribute("data-scroll-show"),r=e.dataset.scrollShow?e.dataset.scrollShow:500,i=e.dataset.scroll?e.dataset.scroll:1;let s,o=0;document.addEventListener("windowScroll",(function(a){const n=window.scrollY;clearTimeout(s),n>=i?(!e.classList.contains("_header-scroll")&&e.classList.add("_header-scroll"),t&&(n>o?e.classList.contains("_header-show")&&e.classList.remove("_header-show"):!e.classList.contains("_header-show")&&e.classList.add("_header-show"),s=setTimeout((()=>{!e.classList.contains("_header-show")&&e.classList.add("_header-show")}),r))):(e.classList.contains("_header-scroll")&&e.classList.remove("_header-scroll"),t&&e.classList.contains("_header-show")&&e.classList.remove("_header-show")),o=n<=0?0:n}))}()})();